import { Button, VerticalBox, LineEdit, ComboBox, StandardButton } from "std-widgets.slint";

export component TempConvWindow inherits Window {
    in property<string> result: "";
    in-out property<string> error-type-string: "Error";
    in-out property<string> error-text-value: "";
    callback request-increase-value();
    callback request-decrease-value();
    callback request-convert-temp(string);
    callback show-error_popup;
    callback error-closed();

    show-error_popup => {
        error-popup.show();
        }
    

    error-popup := PopupWindow {
        width: 500px;
        close-on-click: false;

        Rectangle {
            background: root.background;
            border-color: grey;
            border-width: 3px;
            GridLayout {
                spacing: 5px;
                padding: 5px;
                Row {
                    Rectangle {
                        padding: 0px;
                        height: 45px;
                        background: lightgrey;
                        border-width: 3px;
                        border-color: black;
                        
                    Text {
                        text: root.error-type-string;
                        font-size: 22px;
                        width: 480px;
                        color: black;
                        horizontal-alignment: center;
                        }
                    }
                    }
                Row {
                   error-text-output := Text  {
                        text: root.error-text-value;
                        color: red;
                        font-size: 16px;
                        horizontal-alignment: center;
                        width: 480px;
                        }
                    }
                Row {

                    }
                Row {
                StandardButton {
                    colspan: 1;
                    kind: ok;
                    clicked => {
                            error-popup.close()
                            }
                    }
                    }
            }
        }

        }


    GridLayout {
        padding: 15px;
        spacing: 10px;
        Row {
          temp-text :=  Text {
                text: "Enter Temperature";
                horizontal-alignment: center;
                }
            }
        Row {
          temp-input :=  LineEdit {
                font-size: 16px;
                width: unitin.preferred-width;
                height: 35px;
                placeholder-text: "input here";
                horizontal-alignment: center;
                }
            }
        Row {
            Text{
                text: "From";
                horizontal-alignment: center;
                }
            }
        Row {
            unitin :=  ComboBox {
                width: self.preferred-width;
                height: self.preferred-height;
                model: ["C", "F", "K"];
                current-value: "C";
                }

            }
        Row {
            Text {
                text: "To";
                horizontal-alignment: center;
                }
            }
        Row {
            unitout :=  ComboBox {
                width: self.preferred-width;
                height: self.preferred-height;
                model: ["C", "F", "K"];
                current-value: "F";
                }
            }
        Row {
            Text {
                text: root.result;
                }
            }
        Row {
            Button {
                text: "Convert";
                clicked => {
                    root.request-convert-temp(temp-input.text);
                }
                }
            }
        }
        


}
